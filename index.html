<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ritesh's Terminal Portfolio</title>
 <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
:root {
  --bg-light: #f5f7fa;
  --terminal-bg-light: #fff;
  --terminal-header-light: #f0f3f8;
  --text-light: #23272f;
  --prompt-light: #1976d2;
  --accent-light: #6c47ff;
  --border-light: #e0e5ee;

  --bg-dark: #101926;
  --terminal-bg-dark: #16222c;
  --terminal-header-dark: #1b2736;
  --text-dark: #b9fff4;
  --prompt-dark: #00fac2;
  --accent-dark: #29eabc;
  --border-dark: #193040;

  --radius: 11px;
  --animation-ease: 0.25s cubic-bezier(.5,1.9,.3,1);

  --theme-bg: var(--bg-dark);
  --theme-terminal-bg: var(--terminal-bg-dark);
  --theme-terminal-header: var(--terminal-header-dark);
  --theme-text: var(--text-dark);
  --theme-prompt: var(--prompt-dark);
  --theme-accent: var(--accent-dark);
  --theme-border: var(--border-dark);
}

html, body {
font-family: 'Press Start 2P', monospace;
  background: var(--theme-bg);
  color: var(--theme-text);
  height: 100vh;
  padding: 0;
  margin: 0;
  overflow: hidden;
  transition: background 0.4s;
}

body { 
  position: relative; 
  display: flex;
  flex-direction: column;
}

canvas.bg-particles {
  position: fixed;
  inset: 0;
  width: 100vw !important;
  height: 100vh !important;
  pointer-events: none;
  z-index: 0;
  display: block;
}

.help-item,
.command-output,
.terminal-title,
.welcome-message,
.project-title,
.project-desc,
.skill-item,
.contact-item,
.education-item,
.experience-item {
  font-family: 'Press Start 2P', monospace !important;
  font-size: 0.60rem;
  letter-spacing: 0.4px;
  line-height: 1.3;
}


.terminal-container {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  max-width: 900px;
  width: 96vw;
  margin: 20px auto;
  border-radius: var(--radius);
  overflow: hidden;
  background: transparent;
  box-shadow: 0 7px 42px rgba(25,118,180,0.07);
  height: calc(100vh - 40px);
}

.terminal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--theme-terminal-header);
  border-bottom: 1px solid var(--theme-border);
  padding: 11px 19px;
  min-height: 48px;
  flex-shrink: 0;
}

.terminal-title {
  font-size: 1.18rem;
  font-weight: 600;
  color: var(--theme-accent);
  letter-spacing: 0.5px;
}

.terminal-controls {
  display: flex;
  gap: 10px;
  align-items: center;
}

.theme-toggle, .color-picker {
  font-size: 0.97rem;
  font-family: inherit;
  cursor: pointer;
  padding: 5px 15px;
  border-radius: 5px;
  border: 1px solid var(--theme-prompt);
  background: transparent;
  color: var(--theme-prompt);
  transition: background 0.2s, color 0.2s;
}

.theme-toggle:hover, .color-picker:hover {
  background: var(--theme-prompt);
  color: #fff;
}

.color-preview {
  position: fixed;
  top: 60px;
  right: 20px;
  background: var(--theme-terminal-header);
  border: 1.6px solid var(--theme-border);
  border-radius: var(--radius);
  padding: 15px 12px 12px 12px;
  display: none;
  box-shadow: 0 8px 24px rgba(50,60,80,0.12);
  z-index: 5;
}

.color-option {
  display: flex;
  align-items: center;
  gap: 13px;
  padding: 7px 12px 7px 5px;
  cursor: pointer;
  border-radius: 5px;
  margin-bottom: 2px;
  transition: background 0.2s;
}

.color-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid var(--theme-border);
  box-sizing: border-box;
}

.color-option:hover {
  background: var(--theme-prompt);
  color: #fff;
}

.terminal {
  display: flex;
  flex-direction: column;
  flex: 1;
  background: var(--theme-terminal-bg);
  overflow: hidden;
  border: 1.7px solid var(--theme-border);
  border-top: none;
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

.output-container {
  flex: 1;
  overflow-y: auto;
  padding: 20px 26px 12px 18px;
  scrollbar-width: thin;
  scrollbar-color: var(--theme-prompt) var(--theme-terminal-bg);
  font-size: 1rem;
  line-height: 1.6;
}

.output-container::-webkit-scrollbar { 
  width: 8px; 
  background: transparent; 
}

.output-container::-webkit-scrollbar-thumb { 
  background: var(--theme-prompt); 
  border-radius: 4px; 
}

.line {
  display: flex;
  margin-bottom: 0;
  font-size: 1.06rem;
  min-height: 20px;
  height: auto;
  background: none;
  align-items: flex-start;
}

.prompt {
  color: var(--theme-prompt);
  font-weight: 800;
  margin-right: 10px;
  font-size: 1.1em;
}

.input-container {
  display: flex;
  align-items: center;
  padding: 10px 13px;
  background: var(--theme-terminal-header);
  border-top: 1.6px solid var(--theme-border);
  min-height: 53px;
  flex-shrink: 0;
}

.terminal-input {
  background: transparent;
  border: none;
  color: var(--theme-text);
  font-family: inherit;
  font-size: 1.13rem;
  flex: 1;
  outline: none;
  caret-color: var(--theme-prompt);
  padding-left: 2px;
  transition: color 0.25s;
}

.terminal-input::placeholder { 
  color: #b2bacb; 
  opacity: 0.5; 
}

pre {
  margin: 0;
  white-space: pre-wrap;
  line-height: 1.22;
  font-size: 1.02rem;
  background: none;
  padding: 0;
}

.typing {
  border-right: 2px solid var(--theme-prompt);
  overflow: hidden;
  white-space: nowrap;
  width: 0;
  animation: typing 1.1s steps(44, end) forwards, blink 1.1s step-end infinite;
}

@keyframes typing { 
  from{width:0;} 
  to{width:100%;} 
}

@keyframes blink { 
  50% { border-color: transparent; } 
}

.command-output {
  background: rgba(44, 255, 196, 0.04);
  border-left: 2.7px solid var(--theme-prompt);
  color: var(--theme-text);
  margin-left: 12px;
  border-radius: 0 9px 9px 0;
  padding: 15px 15px 15px 20px;
  font-size: 1.02rem;
  margin-bottom: 0;
  min-width: 55%;
  max-width: 680px;
  box-sizing: border-box;
  position: relative;
}

.command-output h3 {
  font-size: 1.13rem;
  margin: 0 0 12px 0;
  font-weight: bold;
  letter-spacing: 0.5px;
  display: flex; 
  align-items: center;
  gap: 8px;
}

.command-output h4 {
  font-size: 1.05rem;
  margin: 15px 0 8px 0;
  font-weight: 600;
  color: var(--theme-accent);
  display: flex;
  align-items: center;
  gap: 6px;
}

.command-output p {
  margin: 8px 0;
  line-height: 1.5;
}

.command-output ul {
  margin: 8px 0;
  padding-left: 0;
}

.command-output li {
  margin: 0 0 8px 0;
  padding: 0;
  list-style: none;
}

.project-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.project-item {
  margin: 0 0 15px 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.project-title {
  font-weight: 600;
  color: var(--theme-accent);
  font-size: 1.01rem;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 7px;
}

.project-desc {
  margin: 0 0 0 26px;
  color: var(--theme-text);
  font-size: 0.97rem;
  line-height: 1.4;
}

.project-tech {
  margin: 4px 0 0 26px;
  color: var(--theme-prompt);
  font-size: 0.9rem;
  font-weight: 500;
}

.project-link {
  margin: 4px 0 0 26px;
  font-size: 0.9rem;
}

.project-link a {
  color: var(--theme-accent);
  text-decoration: none;
  transition: color 0.2s;
}

.project-link a:hover {
  color: var(--theme-prompt);
}

.skill-category {
  margin: 0 0 12px 0;
}

.skill-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.skill-item {
  display: inline-block;
  background: rgba(44, 255, 196, 0.08);
  color: var(--theme-text);
  padding: 4px 10px;
  margin: 0 6px 6px 0;
  border-radius: 4px;
  font-size: 0.9rem;
  border: 1px solid rgba(44, 255, 196, 0.2);
}

.experience-item {
  margin: 0 0 20px 0;
  padding: 0;
}

.experience-title {
  font-weight: 600;
  color: var(--theme-accent);
  font-size: 1.05rem;
  margin: 0 0 4px 0;
}

.experience-company {
  color: var(--theme-prompt);
  font-size: 0.95rem;
  font-weight: 500;
  margin: 0 0 4px 0;
}

.experience-duration {
  color: var(--theme-text);
  font-size: 0.9rem;
  opacity: 0.8;
  margin: 0 0 8px 0;
}

.experience-desc {
  margin: 0;
  line-height: 1.4;
  font-size: 0.95rem;
}

.contact-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 8px 0;
}

.contact-item a {
  color: var(--theme-accent);
  text-decoration: none;
  transition: color 0.2s;
}

.contact-item a:hover {
  color: var(--theme-prompt);
}

.highlight { 
  color: var(--theme-accent); 
  font-weight: 600; 
}

.icon { 
  margin-right: 7px; 
  font-size: 1.04em; 
}

.welcome-message {
  text-align: center;
  padding: 15px 15px;
  background: rgba(90, 255, 175, 0.07);
  border-radius: 7px;
  margin-bottom: 0;
  border: 1px solid rgba(30,255,180,0.13);
  box-shadow: 0 0 16px rgba(0, 240, 181, 0.09);
  font-size: 1.06rem;
  font-weight: 480;
  color: var(--theme-accent);
}

.welcome-message h2 {
  font-size: 1.12rem;
  margin: 0 0 8px 0;
  color: var(--theme-prompt);
  font-weight: 600;
}

.help-grid {
  display: grid;
  grid-template-columns: repeat(2,minmax(150px,1fr));
  gap: 6px;
  margin-top: 8px;
  font-size: 0.99rem;
}

.help-item {
  background: rgba(24,255,200,0.06);
  padding: 8px 10px;
  border-radius: 4px;
  border-left: 2px solid var(--theme-prompt);
  font-size: 0.97rem;
  margin-bottom: 0;
}

.education-item {
  margin: 0 0 15px 0;
}

.education-degree {
  font-weight: 600;
  color: var(--theme-accent);
  font-size: 1.02rem;
  margin: 0 0 4px 0;
}

.education-school {
  color: var(--theme-prompt);
  font-size: 0.95rem;
  font-weight: 500;
  margin: 0 0 2px 0;
}

.education-year {
  color: var(--theme-text);
  font-size: 0.9rem;
  opacity: 0.8;
  margin: 0;
}

.achievement-item {
  margin: 0 0 8px 0;
  padding-left: 20px;
  position: relative;
}

.achievement-item:before {
  content: "üèÜ";
  position: absolute;
  left: 0;
  top: 0;
}

@media (max-width: 1060px) {
  .terminal-container { 
    max-width: 99vw; 
    margin: 10px auto;
    height: calc(100vh - 20px);
  }
}

@media (max-width: 700px) {
  .output-container { 
    padding: 14px 7vw 8px 5vw; 
  }
  .command-output { 
    max-width: 98vw; 
  }
  .terminal-container {
    margin: 5px auto;
    height: calc(100vh - 10px);
  }
}

@media (max-width: 480px) {
  .terminal-container { 
    width: 99vw; 
    max-width: 100vw; 
    margin: 0; 
    height: 100vh;
    border-radius: 0;
  }
  .terminal-header {
    border-radius: 0;
  }
  .output-container, .input-container { 
    padding-left: 7px; 
    padding-right: 7px; 
  }
  .help-grid { 
    grid-template-columns: 1fr; 
  }
  .command-output {
    max-width: 98vw;
  }
}

@media (max-width: 370px) {
  .command-output, .help-item { 
    font-size: 0.91rem; 
  }
  .terminal-header, .output-container { 
    font-size: 0.94rem; 
  }
}

/* Theme classes */
.theme-light {
  --theme-bg: var(--bg-light);
  --theme-terminal-bg: var(--terminal-bg-light);
  --theme-terminal-header: var(--terminal-header-light);
  --theme-text: var(--text-light);
  --theme-prompt: var(--prompt-light);
  --theme-accent: var(--accent-light);
  --theme-border: var(--border-light);
}

.theme-dark {
  --theme-bg: var(--bg-dark);
  --theme-terminal-bg: var(--terminal-bg-dark);
  --theme-terminal-header: var(--terminal-header-dark);
  --theme-text: var(--text-dark);
  --theme-prompt: var(--prompt-dark);
  --theme-accent: var(--accent-dark);
  --theme-border: var(--border-dark);
}

.theme-green { 
  --theme-prompt: #02ecb0; 
  --theme-accent: #22f0c1; 
}

.theme-purple { 
  --theme-prompt: #7b5bfd; 
  --theme-accent: #c445ef; 
}

.theme-orange { 
  --theme-prompt: #ff7d3b; 
  --theme-accent: #ffa14c; 
}

.theme-rose { 
  --theme-prompt: #e8306e; 
  --theme-accent: #f495c4; 
}

.theme-navy { 
  --theme-prompt: #2156c9; 
  --theme-accent: #2cbae9; 
}

.theme-cyan { 
  --theme-prompt: #11cfc4; 
  --theme-accent: #27abf7; 
}   
  </style>
</head>
<body class="theme-dark theme-green" onclick="focusInput()">
  <canvas class="bg-particles"></canvas>
  <div class="terminal-container">
    <div class="terminal-header">
      <span class="terminal-title">‚ú® Ritesh's Portfolio</span>
      <div class="terminal-controls">
        <button class="theme-toggle" onclick="toggleTheme(event)" tabindex="-1">üåì Light</button>
        <button class="color-picker" onclick="toggleColorPicker(event)" tabindex="-1">üé® Colors</button>
      </div>
    </div>
    <div class="color-preview" id="colorPreview">
      <div class="color-option" onclick="setColor('theme-green')">
        <div class="color-dot" style="background: #02ecb0;"></div><span>Green (default)</span>
      </div>
      <div class="color-option" onclick="setColor('theme-purple')">
        <div class="color-dot" style="background: #7b5bfd;"></div><span>Purple</span>
      </div>
      <div class="color-option" onclick="setColor('theme-orange')">
        <div class="color-dot" style="background: #ff7d3b;"></div><span>Orange</span>
      </div>
      <div class="color-option" onclick="setColor('theme-rose')">
        <div class="color-dot" style="background: #e8306e;"></div><span>Rose</span>
      </div>
      <div class="color-option" onclick="setColor('theme-navy')">
        <div class="color-dot" style="background: #2156c9;"></div><span>Navy</span>
      </div>
      <div class="color-option" onclick="setColor('theme-cyan')">
        <div class="color-dot" style="background: #11cfc4;"></div><span>Cyan</span>
      </div>
    </div>
    <div class="terminal">
      <div class="output-container" id="output"></div>
      <div class="input-container">
        <span class="prompt">$</span>
        <input id="terminalInput" class="terminal-input" placeholder="Type 'help' to get started..." autocomplete="off" />
      </div>
    </div>
  </div>
  <script>
    // ========== ANIMATED CANVAS PARTICLES BG ===========
    (() => {
      const canvas = document.querySelector('canvas.bg-particles');
      const ctx = canvas.getContext('2d');
      let w = window.innerWidth, h = window.innerHeight;
      let particles = [];
      let color1 = "#02ecb088", color2 = "#1976d250", color3 = "#22f0c170";
      function resize() {
        w = window.innerWidth; h = window.innerHeight;
        canvas.width = w;
        canvas.height = h;
      }
      window.addEventListener('resize', resize);
      function Particle() {
        this.r = Math.random()*30+18;
        this.x = Math.random()*w;
        this.y = Math.random()*h;
        this.a = Math.random()*Math.PI*2;
        this.va = (Math.random()-0.5)*0.002;
        this.speed = (Math.random()*0.3)+0.07;
        this.color = Math.random()<0.5 ? color1 : (Math.random()<0.5) ? color2 : color3;
      }
      Particle.prototype.update = function() {
        this.a += this.va;
        this.x += Math.sin(this.a)*this.speed;
        this.y += Math.cos(this.a)*this.speed;
        if (this.x<-40||this.x>w+40||this.y<-40||this.y>h+40) {
          this.x = Math.random()*w; this.y = -40;
        }
      };
      Particle.prototype.draw = function(ctx) {
        ctx.globalAlpha = 0.5;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
        ctx.closePath();
        ctx.fillStyle = this.color;
        ctx.fill();
      };
      function animate() {
        ctx.clearRect(0,0,w,h);
        for (let p of particles) { p.update(); p.draw(ctx);}
        requestAnimationFrame(animate);
      }
      function initParticles() {
        particles = [];
        for(let i=0;i<14;i++) particles.push(new Particle());
      }
      resize();initParticles();animate();
    })();
    // ===================================================

    const input = document.getElementById('terminalInput');
    const output = document.getElementById('output');
    const colorPreview = document.getElementById('colorPreview');
    const themeToggleBtn = document.querySelector('.theme-toggle');
    // Quotes and jokes
    const quotes = [
      `"Code is like humor. When you have to explain it, it's bad." ‚Äì Cory House`,
      `"Programs must be written for people to read, and only incidentally for machines to execute." ‚Äì Harold Abelson`,
      `"Any fool can write code that a computer can understand. Good programmers write code that humans can understand." ‚Äì Martin Fowler`,
      `"First, solve the problem. Then, write the code." ‚Äì John Johnson`,
      `"The best error message is the one that never shows up." ‚Äì Thomas Fuchs`,
      `"Code never lies, comments sometimes do." ‚Äì Ron Jeffries`
    ];
    const jokes = [
      "Why do programmers hate nature? It has too many bugs! üêõ",
      "Why do Java developers wear glasses? Because they don't C#! üëì",
      "How many programmers does it take to change a light bulb? None, it's a hardware problem! üí°",
      "I told my computer I needed a break, and it said 'Error 404: Motivation not found.' üòÖ",
      "Why did the programmer quit his job? He didn't get arrays! üìä",
      "What's a programmer's favorite hangout place? Foo Bar! üç∫"
    ];
    // Commands
    const commands = {
      help: () => `
<div class="help-grid">
  <div class="help-item"><span class="icon">üìñ</span><span class="highlight">about</span> - Learn about me</div>
  <div class="help-item"><span class="icon">üöÄ</span><span class="highlight">projects</span> - See my projects</div>
  <div class="help-item"><span class="icon">‚ö°</span><span class="highlight">skills</span> - My stack</div>
  <div class="help-item"><span class="icon">‚úâÔ∏è</span><span class="highlight">contact</span> - Contact info</div>
  <div class="help-item"><span class="icon">üí¨</span><span class="highlight">quote</span> - Random code quote</div>
  <div class="help-item"><span class="icon">üòÇ</span><span class="highlight">joke</span> - Coding joke</div>
  <div class="help-item"><span class="icon">üé®</span><span class="highlight">color [name]</span> - Change accent</div>
  <div class="help-item"><span class="icon">üåì</span><span class="highlight">theme</span> - Toggle Light/Dark</div>
  <div class="help-item"><span class="icon">üßπ</span><span class="highlight">clear</span> - Clear screen</div>
</div>
<br>
<span class="highlight">Accent colors:</span> green, purple, orange, rose, navy, cyan`,

      about: () => `
<div class="command-output">
  <h3><span class="icon">üëã</span>About Me</h3>
  <div style="margin:0 0 7px 0;">
    <span class="icon">üíª</span>Full Stack Developer ‚Äì <span class="highlight">MERN & React</span>
  </div>
  <div><span class="icon">üìç</span>Unnao, Uttar Pradesh, India</div>
  <div><span class="icon">üíº</span>Software Engineer, <span class="highlight">RMR Technology</span> (1+ years)</div>
  <div style="margin-top:5px;"><span class="icon">üéØ</span>Clean & user-centric code.</div>
</div>`,

      projects: () => `
<div class="command-output">
  <h3><span class="icon">üöÄ</span>Projects</h3>
  <ul class="project-list">
    <li class="project-item">
      <span class="project-title"><span class="icon">ü§ñ</span>AI-Summarizer</span>
      <span class="project-desc">NLP powered, React + JS, auto-summarize articles.</span>
    </li>
    <li class="project-item">
      <span class="project-title"><span class="icon">üèãÔ∏è</span>CaloFit (Cronometer Clone)</span>
      <span class="project-desc">Full nutrition tracker, React + styled-components.</span>
    </li>
    <li class="project-item">
      <span class="project-title"><span class="icon">üè†</span>StayHub (Airbnb Clone)</span>
      <span class="project-desc">Fullstack app: React/Node/Mongo + styled UI.</span>
    </li>
  </ul>
  <div style="margin:0 0 0 0; font-size:0.97em;">
    <span class="icon">üìé</span> See more on my <span class="highlight">GitHub</span>!
  </div>
</div>`,

      skills: () => `
<div class="command-output">
  <h3>‚ö° My Stack</h3>
  <div>
    <h4><span class="icon">üé®</span><span class="highlight">Frontend</span></h4>
    React.js ‚Ä¢ JS ‚Ä¢ TS ‚Ä¢ CSS3 ‚Ä¢ HTML5 ‚Ä¢ Redux ‚Ä¢ Vue.js
  </div>
  <div>
    <h4><span class="icon">‚öôÔ∏è</span><span class="highlight">Backend</span></h4>
    Node.js ‚Ä¢ Express.js ‚Ä¢ MongoDB ‚Ä¢ SQL ‚Ä¢ REST APIs
  </div>
  <div>
    <h4><span class="icon">üõ†Ô∏è</span><span class="highlight">Tools</span></h4>
    Git ‚Ä¢ GitHub ‚Ä¢ Postman ‚Ä¢ Netlify ‚Ä¢ VSCode
  </div>
</div>`,
      contact: () => `
<div class="command-output">
  <h3>üìû Find me online!</h3>
  <p><span class="icon">üìß</span><span class="highlight">Email:</span> ritesh@example.com</p>
  <p><span class="icon">üíº</span><span class="highlight">LinkedIn:</span> linkedin.com/in/riteshkrshukla</p>
  <p><span class="icon">üåê</span><span class="highlight">GitHub:</span> github.com/riteshkumarshukla</p>
  <p><span class="icon">üì±</span><span class="highlight">Telegram:</span> @riteshshukla</p>
</div>`,
      quote: () => `<div class="command-output">${quotes[Math.floor(Math.random() * quotes.length)]}</div>`,
      joke: () => `<div class="command-output">${jokes[Math.floor(Math.random() * jokes.length)]}</div>`,
      clear: () => 'CLEAR_SCREEN',
      theme: () => {
        toggleTheme();
        return `<div class="command-output">Theme toggled.</div>`;
      },
      color: (args) => {
        const valid = ['green', 'purple', 'orange', 'rose', 'navy', 'cyan'];
        const selection = args[0];
        if (!selection || !valid.includes(selection)) {
          return `<div class="command-output">Usage: color [${valid.join('|')}]</div>`;
        }
        setColor('theme-' + selection);
        return `<div class="command-output">Accent color set to <span class="highlight">${selection}</span>.</div>`;
      }
    };

    let history = [], historyIndex = -1;
    // Initial theme state
    let currentThemeIsDark = true;
    let currentAccentClass = 'theme-green';

    function focusInput() { setTimeout(() => input.focus(), 0); }

    function scrollToBottom() {
      output.scrollTop = output.scrollHeight;
    }

    function typeResponse(text, callback) {
      const line = document.createElement('div');
      line.classList.add('line');
      const pre = document.createElement('pre');
      pre.classList.add('typing');
      pre.innerHTML = typeof text === 'function' ? text() : text;
      line.appendChild(pre);
      output.appendChild(line);
      scrollToBottom();
      setTimeout(() => {
        pre.classList.remove('typing');
        if (callback) callback();
      }, Math.min(1100, Math.max(370, pre.innerText.length * 7))); // adaptive
    }

    function setColor(newColorClass) {
      document.body.className = (currentThemeIsDark ? 'theme-dark' : 'theme-light') + ' ' + newColorClass;
      currentAccentClass = newColorClass;
      colorPreview.style.display = 'none';
    }
    function setColorDirect(newColorClass) { // helper for theme restores
      document.body.className = (currentThemeIsDark ? 'theme-dark' : 'theme-light') + ' ' + newColorClass;
      currentAccentClass = newColorClass;
    }
    function toggleTheme(e) {
      currentThemeIsDark = !currentThemeIsDark;
      document.body.className = (currentThemeIsDark ? 'theme-dark' : 'theme-light') + ' ' + currentAccentClass;
      themeToggleBtn.innerText = currentThemeIsDark ? 'üåì Light' : 'üåô Dark';
      if (e) e.stopPropagation();
    }
    function toggleColorPicker(e) {
      colorPreview.style.display = colorPreview.style.display === 'block' ? 'none' : 'block';
      if (e) e.stopPropagation();
    }
    // Hide color picker when clicking outside
    document.addEventListener('click', (e) => {
      if (!colorPreview.contains(e.target) &&
          !e.target.classList.contains('color-picker')) {
        colorPreview.style.display = 'none';
      }
    });

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const cmd = input.value.trim();
        if (!cmd) return;
        const line = document.createElement('div');
        line.classList.add('line');
        line.innerHTML = `<span class="prompt">$</span> ${cmd}`;
        output.appendChild(line);
        history.push(cmd); historyIndex = history.length;
        const [command, ...args] = cmd.split(' ');
        if (command === 'clear') {
          output.innerHTML = '';
        } else if (commands[command]) {
          const response = typeof commands[command] === 'function'
            ? commands[command](args)
            : commands[command];
          if (response !== 'CLEAR_SCREEN')
            typeResponse(response);
        } else {
          typeResponse(`<div class="command-output">‚ùå Command not found: <span class="highlight">${command}</span><br>Type <span class="highlight">'help'</span> for commands.</div>`);
        }
        input.value = '';
        scrollToBottom();
      }
      if (e.key === 'ArrowUp') {
        if (historyIndex > 0) {
          input.value = history[--historyIndex];
          e.preventDefault();
        }
      }
      if (e.key === 'ArrowDown') {
        if (historyIndex < history.length - 1) {
          input.value = history[++historyIndex];
        } else {
          input.value = '';
          historyIndex = history.length;
        }
        e.preventDefault();
      }
    });

    // "Enter" triggers input focus; also on mobile container tap
    window.onload = () => {
      focusInput();
      // Welcome
      const welcomeMsg = `
        <div class="welcome-message">
          <h2>üöÄ Welcome to Ritesh's Terminal</h2>
          <p>Type <span class="highlight">'help'</span> or try a command below üëá</p>
        </div>`;
      typeResponse(welcomeMsg, () => {
        setTimeout(() => { typeResponse(commands.quote); }, 340);
      });
    };
    document.querySelector('.terminal').addEventListener('click', () => input.focus());
    colorPreview.addEventListener('mousedown', (e) => e.stopPropagation());
  </script>
</body>
</html>
